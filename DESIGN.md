# 诡秘之主 - 实时动作RPG游戏设计文档

## 游戏概述
基于《诡秘之主》世界观的实时动作RPG游戏，玩家可选择不同途径，通过打怪收集魔药材料，炮制魔药晋升序列，完成剧情任务。

---

## 开发计划

### 第一阶段：基础框架
**目标：** 创建游戏窗口、主循环、基本场景

- [ ] 游戏主窗口 (800x600)
- [ ] 游戏状态管理（主菜单、游戏中、暂停、背包、对话）
- [ ] 基础场景渲染（贝克兰德街道背景）
- [ ] 游戏主循环

**完成标志：** 能看到游戏主菜单，点击开始进入游戏场景

---

### 第二阶段：途径和序列系统
**目标：** 实现完整的22条途径系统

**序列等级说明：**
| 等级 | 称呼 | 说明 |
|------|------|------|
| 序列9-7 | 低序列 | 普通非凡者，游戏主要成长阶段 |
| 序列6-4 | 中序列 | 强大非凡者，需完成高难度任务解锁 |
| 序列3-1 | 高序列 | 圣者/天使级别，**最终任务**才能达到 |
| 序列0 | 真神 | 游戏终极目标，需完成全部主线 |

**22条途径完整列表：**

| # | 途径名称 | 对应神灵 | 序列9 | 序列8 | 序列7 | 序列6 | 序列5 | 序列4 |
|---|----------|----------|-------|-------|-------|-------|-------|-------|
| 1 | **愚者** | 愚者 | 占卜家 | 小丑 | 魔术师 | 驭火者 | 无面人 | 马戏团长 |
| 2 | **门** | 门 | 偷盗者 | 尸体收集者 | 窃贼 | 旅法者 | 守秘人 | 传送师 |
| 3 | **错误** | 错误 | 罪犯 | 仲裁人 | 混乱行者 | 变异师 | 染疫者 | 行尸 |
| 4 | **隐秘** | 隐秘侍者 | 读心者 | 推演家 | 催眠师 | 操控师 | 梦行者 | 噩梦 |
| 5 | **命运** | 命运 | 幸运儿 | 作祟者 | 概率学者 | 赐运者 | 灾难祭司 | 胜负师 |
| 6 | **太阳** | 永恒烈阳 | 拜祭师 | 光辉骑士 | 阳光祭司 | 驱魔人 | 牧师 | 光之隐修士 |
| 7 | **暴风** | 风暴之主 | 水手 | 航海士 | 海难求生者 | 风眷者 | 御风者 | 暴风祭司 |
| 8 | **审判** | 战神 | 仲裁者 | 铁血骑士 | 绝望骑士 | 惩罚骑士 | 沉默骑士 | 死亡执事 |
| 9 | **战争** | 战神 | 战士 | 武器大师 | 雇佣兵 | 黎明骑士 | 守护者 | 不败军 |
| 10 | **黑夜** | 永夜女神 | 祈密师 | 惊悚者 | 黑夜之眼 | 隐影者 | 半影人 | 影行者 |
| 11 | **死亡** | 死神 | 尸巫 | 掘墓人 | 灵魂操纵师 | 尸骨召唤师 | 死亡预兆者 | 死神使者 |
| 12 | **智慧** | 智慧之神 | 鉴定师 | 考古学家 | 大学者 | 博学者 | 预言家 | 探秘者 |
| 13 | **律师** | 智慧之神 | 律师 | 巧言师 | 驱魔官 | 诡辩家 | 言语巨匠 | 诅咒师 |
| 14 | **猎人** | 红祭司 | 猎人 | 挑衅者 | 复仇者 | 嗜血者 | 血法师 | 血族 |
| 15 | **刺客** | 隐者 | 刺客 | 绝命人 | 无面人 | 歌剧演员 | 魔女 | 祈祷者 |
| 16 | **预言家** | 审判 | 预言家 | 祸连者 | 降灵师 | 记录者 | 通灵者 | 圣灵师 |
| 17 | **炼药** | 神母 | 炼药师 | 药剂师 | 生物学家 | 狂人 | 怪物 | 畸变 |
| 18 | **驭兽** | 神母 | 驭兽师 | 医生 | 变形师 | 精灵使 | 天灾召唤者 | 精灵王 |
| 19 | **执剑** | 白塔 | 执剑者 | 护卫 | 驭风骑士 | 黑骑士 | 圣剑士 | 天空骑士 |
| 20 | **机械** | 蒸汽与机械 | 机械师 | 发明家 | 爆破手 | 探险家 | 机器傀儡师 | 巡游者 |
| 21 | **旁观者** | 神之国度 | 旁观者 | 读报人 | 野心家 | 阴谋家 | 操纵者 | 主宰者 |
| 22 | **黑皇帝** | 黑皇帝 | 强权者 | 独裁者 | 阴谋家 | 征服者 | 野蛮人首领 | 暴君 |

**高序列（序列3-0）- 最终任务解锁：**

| 途径 | 序列3（圣者） | 序列2 | 序列1 | 序列0（真神） |
|------|---------------|-------|-------|---------------|
| 愚者 | 诡秘侍者 | 奇迹师 | 愚者代行者 | **愚者** |
| 门 | 空间行者 | 星之门 | 诸界行者 | **门** |
| 太阳 | 照明者 | 光辉之主 | 圣者 | **永恒烈阳** |
| 暴风 | 海王 | 暴风之灵 | 风暴天使 | **风暴之主** |
| 黑夜 | 暗夜之子 | 夜之女巫 | 黑暗圣者 | **永夜女神** |
| 死亡 | 亡灵天灾 | 死神代言者 | 死亡执政官 | **死神** |

**游戏进度规划：**
```
主线第一章（序列9→8）→ 主线第二章（序列8→7）→ 主线第三章（序列7→6）
     ↓
支线任务解锁中序列（序列6→4）
     ↓
最终章：神战（序列4→0）← 【最终任务】
```

**途径特色分类：**

**近战物理系：**
- 战争途径（战士）- 纯粹的武力
- 审判途径（仲裁者）- 正义与铁血
- 执剑者途径（执剑者）- 剑术精通
- 猎人途径（猎人）- 猎杀与追踪

**魔法远程系：**
- 愚者途径（占卜家）- 占卜与欺诈
- 太阳途径（拜祭师）- 光明与治疗
- 黑夜途径（祈密师）- 黑暗与隐匿
- 死亡途径（尸巫）- 死灵与亡魂

**辅助控制系：**
- 隐秘途径（读心者）- 精神控制
- 命运途径（幸运儿）- 概率操纵
- 预言家途径（预言家）- 预知未来
- 旁观者途径（旁观者）- 窥视与读心

**特殊能力系：**
- 门途径（偷盗者）- 空间与盗窃
- 错误途径（罪犯）- 混乱与错误
- 刺客途径（刺客）- 暗杀隐匿
- 黑皇帝途径（强权者）- 统治与阴谋

**生存支援系：**
- 暴风途径（水手）- 风暴与航海
- 炼药师途径（炼药师）- 药剂与毒素
- 驭兽师途径（驭兽师）- 召唤与变形
- 机械师途径（机械师）- 机械与爆破

**智慧研究系：**
- 智慧途径（鉴定师）- 知识与鉴定
- 律师途径（律师）- 言语与契约

**数据结构：**
```python
PATHWAYS = {
    "愚者": {
        "name": "愚者途径",
        "god": "愚者",
        "type": "魔法远程",
        "sequences": {
            9: {"name": "占卜家", "skills": ["灵视", "占卜"], "hp": 100, "attack": 15, "defense": 5},
            8: {"name": "小丑", "skills": ["灵视", "占卜", "纸牌投掷", "易容"], "hp": 150, "attack": 25, "defense": 8},
            7: {"name": "魔术师", "skills": ["灵视", "占卜", "纸牌投掷", "易容", "火焰跳跃", "空气炮"], "hp": 200, "attack": 40, "defense": 12},
        }
    },
    "门": {
        "name": "门途径",
        "god": "门",
        "type": "特殊能力",
        "sequences": {
            9: {"name": "偷盗者", "skills": ["闪现", "隐藏"], "hp": 80, "attack": 20, "defense": 3},
            8: {"name": "尸体收集者", "skills": ["闪现", "隐藏", "短距传送", "尸变术"], "hp": 120, "attack": 30, "defense": 6},
            7: {"name": "窃贼", "skills": ["闪现", "隐藏", "短距传送", "尸变术", "窃取能力", "空间切割"], "hp": 160, "attack": 45, "defense": 10},
        }
    },
    # ... 其他20条途径
}
```

**完成标志：** 玩家可在开始游戏时选择途径，显示对应属性和技能

---

### 第三阶段：玩家角色和技能系统
**目标：** 实现玩家控制和技能释放

**玩家控制：**
- WASD / 方向键：移动
- J / 鼠标左键：普通攻击
- K / 鼠标右键：闪避
- 1-4 数字键：释放技能
- I：打开背包
- ESC：暂停菜单

**技能示例（占卜家途径）：**
| 技能 | 效果 | 冷却 |
|------|------|------|
| 灵视 | 显示敌人弱点，增加暴击率 | 10秒 |
| 占卜 | 预知攻击，短暂无敌 | 15秒 |
| 纸牌投掷 | 远程攻击，造成伤害 | 3秒 |

**完成标志：** 玩家可以移动、攻击、释放技能

---

### 第四阶段：怪物和战斗系统
**目标：** 实现敌人AI和战斗逻辑

**怪物类型：**
1. **低级邪灵** - 普通敌人，近战攻击
2. **活尸** - 缓慢但高伤害
3. **梦魇** - 远程攻击，会闪烁移动
4. **堕落非凡者** - 精英怪，有技能

**战斗机制：**
- 实时碰撞检测
- 伤害数字显示
- 敌人血条
- 击杀奖励（材料掉落）

**完成标志：** 可以与怪物战斗，击杀后掉落材料

---

### 第五阶段：魔药材料和炮制系统
**目标：** 实现材料收集和魔药炮制

**材料系统：**
```python
材料 = {
    "深蓝梦魇花": {"rarity": "普通", "drop_from": ["梦魇"]},
    "活尸心脏": {"rarity": "稀有", "drop_from": ["活尸"]},
    "灵性水晶": {"rarity": "稀有", "drop_from": ["邪灵"]},
}
```

**魔药配方（占卜家途径示例）：**
| 序列 | 魔药 | 材料 |
|------|------|------|
| 9→8 | 小丑魔药 | 深蓝梦魇花x3 + 灵性水晶x2 + 小丑鱼脊液x1 |
| 8→7 | 魔术师魔药 | 梦境蝶翼x5 + 魔术师遗物x1 + 月光精华x3 |

**炮制界面：**
- 显示已有材料
- 显示可炮制的魔药
- 炮制动画
- 晋升提示

**完成标志：** 可以收集材料，打开炮制界面制作魔药并晋升

---

### 第六阶段：剧情任务系统
**目标：** 实现主线和支线任务

**主线任务（第一章）：**
1. **觉醒** - 教程关卡，学习基本操作
2. **夜巡队调查** - 调查贝克兰德东区的诡异事件
3. **邪教踪迹** - 追踪极光会的线索
4. **序列材料** - 收集晋升所需的材料
5. **首次晋升** - 完成第一次序列晋升

**任务系统：**
- 任务日志
- 任务追踪
- NPC对话
- 任务奖励

**完成标志：** 可以接取任务，完成后获得奖励

---

## 文件结构

```
project2/
├── lord_of_mysteries/
│   ├── main.py              # 游戏入口
│   ├── game.py              # 游戏主类
│   ├── settings.py          # 游戏配置
│   ├── entities/
│   │   ├── player.py        # 玩家类
│   │   ├── enemy.py         # 敌人类
│   │   └── npc.py           # NPC类
│   ├── systems/
│   │   ├── pathway.py       # 途径序列系统
│   │   ├── combat.py        # 战斗系统
│   │   ├── inventory.py     # 背包系统
│   │   ├── potion.py        # 魔药炮制系统
│   │   └── quest.py         # 任务系统
│   ├── ui/
│   │   ├── menu.py          # 菜单界面
│   │   ├── hud.py           # 游戏HUD
│   │   ├── dialog.py        # 对话界面
│   │   └── inventory_ui.py  # 背包界面
│   └── data/
│       ├── pathways.py      # 途径数据
│       ├── enemies.py       # 敌人数据
│       ├── items.py         # 物品数据
│       └── quests.py        # 任务数据
```

---

## 执行顺序

1. **第一阶段** → 确认基础框架可运行
2. **第二阶段** → 确认途径选择功能正常
3. **第三阶段** → 确认玩家可操控和释放技能
4. **第四阶段** → 确认战斗系统正常
5. **第五阶段** → 确认魔药系统正常
6. **第六阶段** → 确认任务系统正常

每完成一个阶段，测试确认后再进入下一阶段。

---

## 技术栈

- **Python 3.x**
- **Pygame** - 游戏引擎
- **JSON** - 数据存储（存档）

---

## 准备好后请说"开始第一阶段"，我将开始编写代码！
